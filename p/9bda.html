<!DOCTYPE html><html lang="zh-cn"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><title>Mac 设置自动启动项 | 临渊羡鱼 退而织网</title><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="author" content="Ray Young"><meta name="designer" content="minfive"><meta name="keywords" content="博客, macOS, Mac, MacBook, MacBook Pro, iOS, iPhone, Apple Watch, watchOS, AirPods, 科技, 编程, 程序员, 随笔, 电影, 影评, 分享, 好物分享"><meta name="description" content="杂货铺"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=yes"><meta name="mobile-web-app-capable" content="yes"><meta name="robots" content="all"><link rel="canonical" href="https://ultrarex.com/p/9bda.html"><link rel="icon" type="image/png" href="/img/favicon.ico" sizes="32x32"><link rel="stylesheet" href="/scss/base/index.css"><link rel="alternate" href="/atom.xml" title="三十七度一"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?7c911bc010299ad31438b0b902611b91";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-81679465-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-81679465-1")</script><link rel="stylesheet" href="/scss/views/page/post.css"></head><body ontouchstart><div id="page-loading" class="page page-loading" style="background-image:url(https://i.loli.net/2019/04/27/5cc420fa2f69e.gif)"></div><div id="page" class="page js-hidden"><header class="page__small-header page__header--small"><nav class="page__navbar"><div class="page__container navbar-container"><a class="page__logo" href="/" title="三十七度一" alt="三十七度一"><img src="/img/logo.png" alt="三十七度一"></a><nav class="page__nav"><ul class="nav__list clearfix"><li class="nav__item"><a href="/" alt="首页" title="首页">首页</a></li><li class="nav__item"><a href="/archives" alt="归档" title="归档">归档</a></li><li class="nav__item"><a href="/about" alt="关于" title="关于">关于</a></li></ul></nav><button class="page__menu-btn" type="button"><i class="iconfont icon-menu"></i></button></div></nav></header><main class="page__container page__main"><div class="page__content"><article class="page__post"><div class="post__cover"><img src="https://i.loli.net/2019/04/27/5cc420fda884d.jpg" alt="Mac 设置自动启动项"></div><header class="post__info"><h1 class="post__title">Mac 设置自动启动项</h1><div class="post__mark"><div class="mark__block"><i class="mark__icon iconfont icon-write"></i><ul class="mark__list clearfix"><li class="mark__item"><a href="/">undefined</a></li></ul></div><div class="mark__block"><i class="mark__icon iconfont icon-time"></i><ul class="mark__list clearfix"><li class="mark__item"><span>2018-05-28</span></li></ul></div><div class="mark__block"><i class="mark__icon iconfont icon-tab"></i><ul class="mark__list clearfix"><li class="mark__item"><a href="/tags/Mac-Tips/">Mac Tips</a></li></ul></div><div class="mark__block"><i class="mark__icon iconfont icon-eye"></i><ul class="mark__list clearfix"><li id="busuanzi_container_page_pv" class="mark__item"><span id="busuanzi_value_page_pv"></span>次</li></ul></div></div></header><div class="post__content"><p>方法有二，分别为：</p><h2 id="1-使用用户登录项"><a href="#1-使用用户登录项" class="headerlink" title="1. 使用用户登录项"></a>1. 使用用户登录项</h2><p>进入 <code>系统便好设置</code> -&gt; <code>用户与群组</code> -&gt; <code>登录项</code> 点击 + 按钮，添加即可。<br>这种方式比较简单快捷，但是用户登录后才会触发。</p><h2 id="2-launchctl-加载-plist-文件"><a href="#2-launchctl-加载-plist-文件" class="headerlink" title="2. launchctl 加载 plist 文件"></a>2. launchctl 加载 plist 文件</h2><p>Mac 开机启动时会启动 launchd 进程，然后依次完成以下工作：</p><ol><li>根据 /System/Library/LaunchDaemons 和 /Library/LaunchDaemons 路径下的 plist 文件加载系统级守护进程</li><li>注册上述守护进程需要的套接字及文件描述符</li><li>根据 plist 文件中的 KeepAlive 键值，启动那些需要在系统周期内一直保持的进程</li><li>根据 plist 文件的设定，在条件满足时启动进程</li><li>关机时，给所有由 launchctl 开启的进程发送 SIGTERM 信号</li></ol><p>另外：用户登录后才会加载 /System/Library/LaunchAgents 和 /Library/LaunchAgents 路径下的 plist 文件</p><p>launchd 配置文件共有 5 个路径：</p><table><thead><tr><th>配置文件路径</th><th>释义</th></tr></thead><tbody><tr><td>~/Library/LaunchAgents</td><td>由用户自己定义的任务项</td></tr><tr><td>/Library/LaunchAgents</td><td>由管理员为用户定义的任务项</td></tr><tr><td>/Library/LaunchDaemons</td><td>由管理员定义的守护进程任务项</td></tr><tr><td>/System/Library/LaunchAgents</td><td>由 macOS 为用户定义的任务项</td></tr><tr><td>/System/Library/LaunchDaemons</td><td>由 macOS 定义的守护进程任务项</td></tr></tbody></table><p>启动顺序为：</p><ol><li>/System/Library/LaunchDaemons</li><li>/Library/LaunchDaemons</li><li>/System/Library/LaunchAgents</li><li>/Library/LaunchAgents</li><li>~/Library/LaunchAgents</li></ol><p>其中：<br>LaunchDaemons 是用户未登陆前就启动的服务（守护进程）。<br>LaunchAgents 是用户登陆后启动的服务（守护进程）。</p><p>那么我们就可以根据需要来编写 plist 文件达成我们的需求。</p><h3 id="plist-文件示例"><a href="#plist-文件示例" class="headerlink" title="plist 文件示例"></a>plist 文件示例</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plist</span> <span class="attr">version</span>=<span class="string">"1.0"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>Label<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>com.example.exampled<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>ProgramArguments<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">string</span>&gt;</span>exampled<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>KeepAlive<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">true</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>RunAtLoad<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">true</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plist</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="plist-文件部分键值说明"><a href="#plist-文件部分键值说明" class="headerlink" title="plist 文件部分键值说明"></a>plist 文件部分键值说明</h3><p>详情请看 <a href="https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man5/launchd.plist.5.html#//apple_ref/doc/man/5/launchd.plist" target="_blank" rel="noopener">点我</a></p><h5 id="Label-必须"><a href="#Label-必须" class="headerlink" title="Label (必须)"></a>Label (必须)</h5><p>服务的名称</p><h5 id="ProgramArguments-指定可执行文件路径及参数"><a href="#ProgramArguments-指定可执行文件路径及参数" class="headerlink" title="ProgramArguments  指定可执行文件路径及参数"></a>ProgramArguments 指定可执行文件路径及参数</h5><p>比如执行 <code>ls -a</code>，对应到配置中为：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>ProgramArguments<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>ls<span class="tag">&lt;/<span class="name">string</span>&gt;</span>         </span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>-a<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="RunAtLoad-可选"><a href="#RunAtLoad-可选" class="headerlink" title="RunAtLoad (可选)"></a>RunAtLoad (可选)</h5><p>标识 launchd 在加载完该项服务之后立即启动路径指定的可执行文件。默认值为 false,设置为 true 即可实现开机运行脚本文件</p><h5 id="StartCalendarInterval-可选"><a href="#StartCalendarInterval-可选" class="headerlink" title="StartCalendarInterval (可选)"></a>StartCalendarInterval (可选)</h5><p>该关键字可以用来设置定时执行可执行程序，可使用 Month, Day, Hour, Minute, Second等子关键字，它可以指定脚本在多少月，天，小时，分钟，秒，星期几等时间上执行，若缺少某个关键字则表示任意该时间点，类似于 Unix 的 Crontab 计划任务的设置方式，比如在该例子中设置为每小时的20分的时候执行该命令</p><h5 id="KeepAlive-可选"><a href="#KeepAlive-可选" class="headerlink" title="KeepAlive (可选)"></a>KeepAlive (可选)</h5><p>是否保持持续运行</p><p>注：所有 key 关键字详细使用说明可以在 macOS 终端下使用命令 <code>man launchd.plist</code> 查询</p><h5 id="UserName-可选"><a href="#UserName-可选" class="headerlink" title="UserName (可选)"></a>UserName (可选)</h5><p>指定运行启动项的用户，只有当 Launchd 作为 root 用户运行时，此项才使用</p><h5 id="GroupName-可选"><a href="#GroupName-可选" class="headerlink" title="GroupName (可选)"></a>GroupName (可选)</h5><p>指定运行启动项的组，只有当 Launchd 作为 root 用户运行时，此项才适用</p><h3 id="检查-plist-文件语法是否正确"><a href="#检查-plist-文件语法是否正确" class="headerlink" title="检查 plist 文件语法是否正确"></a>检查 plist 文件语法是否正确</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plutil ~/Library/LaunchAgents/example.plist</span><br></pre></td></tr></table></figure><h3 id="载入配置-使其生效"><a href="#载入配置-使其生效" class="headerlink" title="载入配置, 使其生效"></a>载入配置, 使其生效</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">launchctl load ~/Library/LaunchAgents/example.plist</span><br></pre></td></tr></table></figure><h3 id="卸载配置"><a href="#卸载配置" class="headerlink" title="卸载配置"></a>卸载配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">launchctl unload ~/Library/LaunchAgents/example.plist</span><br></pre></td></tr></table></figure><h3 id="查看服务运行状态"><a href="#查看服务运行状态" class="headerlink" title="查看服务运行状态"></a>查看服务运行状态</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">launchctl list</span><br></pre></td></tr></table></figure><div class="post-announce">感谢您的阅读，本文由 <a href="https://ultrarex.com">三十七度一</a> 版权所有。如若转载，请注明出处：三十七度一（<a href="https://ultrarex.com/p/9bda.html">https://ultrarex.com/p/9bda.html</a>）</div><div class="post__prevs"><div class="post__prev"><a href="/p/c019.html" title="修改 Mac 上指定应用语言设置"><i class="iconfont icon-prev"></i>修改 Mac 上指定应用语言设置</a></div><div class="post__prev post__prev--right"><a href="/p/2358.html" title="使用 Automator 上传图片到 sm.ms（再版）">使用 Automator 上传图片到 sm.ms（再版）<i class="iconfont icon-next"></i></a></div></div></div></article><div id="disqus_thread"></div></div><aside class="page__sidebar"><form id="page-search-from" class="page__search-from" action="/search/"><label class="search-form__item"><input class="input" type="text" name="search" placeholder="Search..."> <i class="iconfont icon-search"></i></label></form><div class="sidebar__block"><h3 class="block__title">简介</h3><p class="block__text">杂货铺</p></div><div class="sidebar__block"><h3 class="block__title">文章分类</h3><ul class="block-list"><li class="block-list-item"><a class="block-list-link" href="/categories/网站/">网站</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/生活/">生活</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/技术/">技术</a><span class="block-list-count">17</span><ul class="block-list-child"><li class="block-list-item"><a class="block-list-link" href="/categories/技术/hexo/">hexo</a><span class="block-list-count">3</span><ul class="block-list-child"><li class="block-list-item"><a class="block-list-link" href="/categories/技术/hexo/introduce/">introduce</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/技术/hexo/faq/">faq</a><span class="block-list-count">1</span></li></ul></li><li class="block-list-item"><a class="block-list-link" href="/categories/技术/Windows-Tips/">Windows Tips</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/技术/Mac-Tips/">Mac Tips</a><span class="block-list-count">12</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/技术/Homebrew/">Homebrew</a><span class="block-list-count">1</span><ul class="block-list-child"><li class="block-list-item"><a class="block-list-link" href="/categories/技术/Homebrew/MySQL/">MySQL</a><span class="block-list-count">1</span></li></ul></li></ul></li></ul></div><div class="sidebar__block"><h3 class="block__title">最新文章</h3><ul class="block-list latest-post-list"><li class="latest-post-item"><a href="/p/2358.html" title="使用 Automator 上传图片到 sm.ms（再版）"><div class="item__cover"><img src="https://i.loli.net/2019/04/27/5cc420fda884d.jpg" alt="使用 Automator 上传图片到 sm.ms（再版）"></div><div class="item__info"><h3 class="item__title">使用 Automator 上传图片到 sm.ms（再版）</h3><span class="item__text">2019-04-27</span></div></a></li><li class="latest-post-item"><a href="/p/9bda.html" title="Mac 设置自动启动项"><div class="item__cover"><img src="https://i.loli.net/2019/04/27/5cc420fda884d.jpg" alt="Mac 设置自动启动项"></div><div class="item__info"><h3 class="item__title">Mac 设置自动启动项</h3><span class="item__text">2018-05-28</span></div></a></li><li class="latest-post-item"><a href="/p/c019.html" title="修改 Mac 上指定应用语言设置"><div class="item__cover"><img src="https://i.loli.net/2019/04/27/5cc420fda884d.jpg" alt="修改 Mac 上指定应用语言设置"></div><div class="item__info"><h3 class="item__title">修改 Mac 上指定应用语言设置</h3><span class="item__text">2018-05-22</span></div></a></li><li class="latest-post-item"><a href="/p/5674.html" title="使用 Cloudflare 给网站免费升级 HTTPS"><div class="item__cover"><img src="https://i.loli.net/2017/09/20/59c210a8bfc1d.png" alt="使用 Cloudflare 给网站免费升级 HTTPS"></div><div class="item__info"><h3 class="item__title">使用 Cloudflare 给网站免费升级 HTTPS</h3><span class="item__text">2017-09-20</span></div></a></li></ul></div><div class="sidebar__block"><h3 class="block__title">文章标签</h3><ul class="block-list tag-list clearfix"><li class="tag-item"><a class="tag-link" href="/tags/Automator/">Automator</a></li><li class="tag-item"><a class="tag-link" href="/tags/Dock/">Dock</a></li><li class="tag-item"><a class="tag-link" href="/tags/GitHub-Pages/">GitHub Pages</a></li><li class="tag-item"><a class="tag-link" href="/tags/Go2Shell/">Go2Shell</a></li><li class="tag-item"><a class="tag-link" href="/tags/HTTPS/">HTTPS</a></li><li class="tag-item"><a class="tag-link" href="/tags/Homebrew/">Homebrew</a></li><li class="tag-item"><a class="tag-link" href="/tags/Mac-Tips/">Mac Tips</a></li><li class="tag-item"><a class="tag-link" href="/tags/MySQL/">MySQL</a></li><li class="tag-item"><a class="tag-link" href="/tags/STOMP/">STOMP</a></li><li class="tag-item"><a class="tag-link" href="/tags/Windows-Tips/">Windows Tips</a></li><li class="tag-item"><a class="tag-link" href="/tags/blog/">blog</a></li><li class="tag-item"><a class="tag-link" href="/tags/hexo/">hexo</a></li><li class="tag-item"><a class="tag-link" href="/tags/macOS-U盘安装/">macOS U盘安装</a></li><li class="tag-item"><a class="tag-link" href="/tags/sm-ms/">sm.ms</a></li><li class="tag-item"><a class="tag-link" href="/tags/使-LOL-无法打开/">使 LOL 无法打开</a></li><li class="tag-item"><a class="tag-link" href="/tags/修改-Launchpad-布局/">修改 Launchpad 布局</a></li><li class="tag-item"><a class="tag-link" href="/tags/显示资源库文件夹/">显示资源库文件夹</a></li><li class="tag-item"><a class="tag-link" href="/tags/生活/">生活</a></li><li class="tag-item"><a class="tag-link" href="/tags/破铜烂铁/">破铜烂铁</a></li><li class="tag-item"><a class="tag-link" href="/tags/系统截图/">系统截图</a></li><li class="tag-item"><a class="tag-link" href="/tags/终端用户名修改/">终端用户名修改</a></li><li class="tag-item"><a class="tag-link" href="/tags/网站/">网站</a></li><li class="tag-item"><a class="tag-link" href="/tags/获取-macOS-版本号/">获取 macOS 版本号</a></li></ul></div></aside></main><footer class="page__footer"><section class="footer__top"><div class="page__container footer__container"><div class="footer-top__item footer-top__item--2"><h3 class="item__title">关于</h3><div class="item__content"><p class="item__text">以文字记录点滴，让生活有迹可循</p><ul class="footer__contact-info"><li class="contact-info__item"><i class="iconfont icon-address"></i> <span>Haidian District, Beijing, China</span></li><li class="contact-info__item"><i class="iconfont icon-email2"></i> <span>ringxtee@gmail.com</span></li></ul></div></div><div class="footer-top__item footer__image"><img src="/img/weixin_reward.png" alt="logo" title="三十七度一"></div><div class="footer-top__item"><h3 class="item__title">构建工具</h3><div class="item__content"><ul class="footer-top__list"><li class="list-item"><a href="https://hexo.io/" title="Blog Framework" target="_blank">Hexo</a></li><li class="list-item"><a href="https://sass-lang.com/" title="Syntactically Awesome StyleSheets" target="_blank">Sass</a></li><li class="list-item"><a href="http://node-swig.github.io/swig-templates/" title="JavaScript Template Engine" target="_blank">Swig</a></li><li class="list-item"><a href="https://github.com/Mrminfive/hexo-theme-skapp" title="Blog Theme" target="_blank">hexo-theme-skapp</a></li></ul></div></div></div></section><section class="footer__bottom"><div class="page__container footer__container"><p class="footer__copyright">© <a href="https://github.com/Mrminfive/hexo-theme-skapp" target="_blank">Skapp</a> 2017 powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, made by <a href="https://github.com/Mrminfive" target="_blank">minfive</a>.</p><ul class="footer__social-network clearfix"><li class="social-network__item"><a href="https://github.com/UltraREX" target="_blank" title="github"><i class="iconfont icon-github"></i></a></li><li class="social-network__item"><a href="http://weibo.com/rxtee" target="_blank" title="weibo"><i class="iconfont icon-weibo"></i></a></li><li class="social-network__item"><a href="http://t.me/TizzyRay" target="_blank" title="telegram"><i class="iconfont icon-telegram"></i></a></li><li class="social-network__item"><a href="/atom.xml" target="_blank" title="rss"><i class="iconfont icon-rss"></i></a></li></ul></div></section></footer><div id="back-top" class="back-top back-top--hidden js-hidden"><i class="iconfont icon-top"></i></div></div><script src="/js/common.js"></script><script src="/js/page/post.js"></script><script>var disqus_shortname="san-shi-qi-du-yi",disqus_config=function(){this.page.url="https://ultrarex.com/p/9bda.html",this.page.identifier="/p/9bda.html",this.page.title="Mac 设置自动启动项"};!function(){var t=document,e=t.createElement("script");e.src="https://"+disqus_shortname+".disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></body></html>